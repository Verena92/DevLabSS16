
<!doctype html>
<!-- The DOCTYPE declaration above will set the     -->
<!-- browser's rendering engine into                -->
<!-- "Standards Mode". Replacing this declaration   -->
<!-- with a "Quirks Mode" doctype is not supported. -->

<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">

    <link type="text/css" rel="stylesheet" href="SpeechTokenizer.css">

    <title>Speech Tokenizer</title>
    
    <!--                                           -->
    <!-- This script loads your compiled module.   -->
    <!-- If you add any GWT meta tags, they must   -->
    <!-- be added before this line.                -->
    <!--                                           -->
    <script type="text/javascript" language="javascript" src="speechtokenizer/speechtokenizer.nocache.js"></script>
    <script type="text/javascript" src="Webspeech.js" charset="utf-8"></script>
  </head>

  <!--                                           -->
  <!-- The body can have arbitrary html, or      -->
  <!-- you can leave the body empty if you want  -->
  <!-- to create a completely dynamic UI.        -->
  <!--                                           -->
  <body>
	
    <!-- history support -->
    <iframe src="javascript:''" id="__gwt_historyFrame" tabIndex='-1' style="position:absolute;width:0;height:0;border:0"></iframe>
    
    <!-- gapi for Hangouts Button -->
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    
    
    <!-- RECOMMENDED if your web app will not function without JavaScript enabled -->
    <noscript>
      <div style="width: 22em; position: absolute; left: 50%; margin-left: -11em; color: red; background-color: white; border: 1px solid red; padding: 4px; font-family: sans-serif">
        Your web browser must have JavaScript enabled
        in order for this application to display correctly.
      </div>
    </noscript>

    	<h1>Speech Tokenizer Plugin</h1>

   		<div>Start Google+ Hangouts Client with the Application</div>
    	
    	<div class="g-hangout" data-render="createhangout" data-initial_apps="[{ app_id : 'speech-tokenizer-1282', start_data : 'dQw4w9WgXcQ', 'app_type' : 'ROOM_APP' }]"></div>
  		
  		<div>Developer-Link: <a href="http://g.co/hangout">Click</a></div>
  		
  		<div id="button"><button onClick="startButton(event)">Click</button></div>
  		<!-- <input type="button" value="Click" onClick="document.getElementById(startButton(event))">-->
  		
  		<div>Result:</div>
  		<div id="results">
  			<span id="final_span" class="final"></span>
		</div>
  </body>
</html>


<!--  <script type="text/javascript">

	var sttResult = '';	
	var recognizing = false;
	var ignore_onend;

	if (!('webkitSpeechRecognition' in window)) { //diese Funktion ermöglicht, dass der Click Button öfters ausgeführt werden kann, ohne dass die Seite aktualisiert werden muss.
			upgrade ();
		} else {
			/*Erlaubt der Seite Zugriff auf das Mikrofon - webkitSpeechRecognition Objekt stellt das Speech Interface bereit und definiert Eventhandler*/
			//That is the object that will manage our whole recognition process.
			var recognition = new webkitSpeechRecognition();
	  		recognition.interimResults = true;
	
			//Listening (capturing voice from audio input) started.
			recognition.onstart = function() {
    			recognition.lang = "en-US";
    			recognizing = true;
  			};
  	
  			recognition.onend = function() {
    			recognizing = false;
    			if (ignore_onend) {
      				return;
    			}
  			};
  		
  			/*recognition.onresult = function(event) { //the event holds the results
  				The SpeechRecognitionEvent results property returns a SpeechRecognitionResultList object
  				The SpeechRecognitionResultList object contains SpeechRecognitionResult objects.
  				It has a getter so it can be accessed like an array
  				The first [0] returns the SpeechRecognitionResult at position 0.
  				Each SpeechRecognitionResult object contains SpeechRecognitionAlternative objects that contain individual results.
  				These also have getters so they can be accessed like arrays.
  				The second [0] returns the SpeechRecognitionAlternative at position 0.
  				We then return the transcript property of the SpeechRecognitionAlternative object
  				
  				var sttResult = event.results[0][0].transcript;
  				interim.innerHTML = linebreak(sttResult);
				for (var i = event.resultIndex; i < event.results.length; ++i) {
					if (event.results[i].isFinal) {
					sttResult += event.results[i][0].transcript;
				}
				sttResult = capitalize(sttResult);
				interim.innerHTML = linebreak(sttResult);
  			};*/
  	
  	recognition.onresult = function(event) {
   				//var interim_transcript = '';
    			for (var i = event.resultIndex; i < event.results.length; ++i) {
      				if (event.results[i].isFinal) {
        				sttResult += event.results[i][0].transcript;
      				} 
    			}
    			/*linebreak für neuen Paragraphen, wird dann in HTML übersetzt*/
    			sttResult = capitalize(sttResult);
    			/*final_span für schwarzen Text*/
    			final_span.innerHTML = linebreak(sttResult);
  			};
  }
  			
  	
  	
  	/*recognition.onspeechend = function() {
  		recognition.stop();
  	}*/
  			
		
/*Wird nach Drücken auf den Start-Button aufgerufen
function startButton(event) {
	if (recognizing) {
    	recognition.stop();
    	return;
  	}
	sttResult = '';
	aktiviert den Speech Recognizer und ruft onstart Eventhandler auf
	recognition.start();
	interim.innerHTML = '';
	}*/
	
	/*Wird nach Drücken auf den Start-Button aufgerufen*/
function startButton(event) {
	if (recognizing) {
    	recognition.stop();
    	return;
  	}
	sttResult = '';
	/*aktiviert den Speech Recognizer und ruft onstart Eventhandler auf*/
	recognition.start();
	ignore_onend = false;
	final_span.innerHTML = '';
	}
	
/* Durch linebreak und capatilize wird Text in Box eingeblendet */

function linebreak(sttResult) {
	return sttResult;
	}

function capitalize(sttResult) {
	return sttResult;
	}
	
</script>

<!-- <!DOCTYPE html>
<meta charset="utf-8">
<script type="text/javascript" src="/SpeechTokenizer/src/Webspeech.js"></script>

<head>
	<title>Speech Tokenizer</title>
	
</head>
<body>
<h1 class="center" id="headline">Speech Tokenizer</h1>
<div class="center">
	Um eine Aufnahme zu tätigen, bitte den Button "Speak" betätigen - die Aufnahme endet automatisch oder durch erneutes Klicken des "Speak" Buttons.
</div>
<br>
<div class="center">
	<button id="start_button" onclick="startButton(event)">Speak</button>
</div>
<div id="results">
  <span id="final_span" class="final"></span>
  <span id="interim_span" class="interim"></span>
</div>
</body>
-->




<!-- CSS Styles 
<style> 
 * {
    font-family: Verdana, Arial, sans-serif;
  }
  .center {
    padding: 10px;
    text-align: center;
  }
  .final {
    color: black;
    padding-right: 3px; 
  }
  .interim {
    color: gray;
  }
  .right {
    float: right;
  }
  /**bis hier .**/
  #headline {
    font-size: 40px;
    font-weight: 300;
  }
  #results {
    font-size: 14px;
    font-weight: bold;
    border: 1px solid #ddd;
    padding: 15px;
    text-align: left;
    min-height: 150px;
  }
  #start_button {
    border: 1;
    background-color:transparent;
    padding: 2;
  }
</style>-->
